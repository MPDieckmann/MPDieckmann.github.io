<div class="widget">
  <h2>Repositories</h2>
  <nav class="menu">
    {% assign depth = 0 %}
    {% assign arr = "/" | split: "" %}
    {% assign currentMenu = "/" %}
    {% for item in site.repositories %}
      {% unless item.url contains currentMenu %}
      {% assign depth = depth | minus: 1 %}
      {% assign currentMenu = arr[depth] %}
      </ul></li>
    {% endunless %}
    {% if item.next and item.next.url contains item.url %}
      {% assign depth = depth | plus: 1 %}
      {% assign arr[depth] = item.url %}
      {% assign currentMenu = item.url %}
        <li class="menu-item{% if page.url == item.url %} current-menu-item{% elsif page.url contains item.url and item.url != "/" %} current-menu{% endif %}">
          <a href="{{ item.url | absolute_url }}">
            {% if item.icon %}<span class="icon icon-{{ item.icon }}"></span>{% endif %}
            {{ item.title | default: item.url }}
          </a>
          <ul class="menu">
    {% elsif item.url contains currentMenu %}
        <li class="menu-item{% if page.url == item.url %} current-menu-item{% elsif page.url contains item.url and item.url != "/" %} current-menu{% endif %}">
          <a href="{{ item.url | absolute_url }}">
            {% if item.icon %}<span class="icon icon-{{ item.icon }}"></span>{% endif %}
            {{ item.title | default: item.url }}
          </a>
        </li>
    {% else %}
        <li class="menu-item{% if page.url == item.url %} current-menu-item{% elsif page.url contains item.url and item.url != "/" %} current-menu{% endif %}">
          <a href="{{ item.url | absolute_url }}">
            {% if item.icon %}<span class="icon icon-{{ item.icon }}"></span>{% endif %}
            {{ item.title | default: item.url }}
          </a>
        </li>
    {% endif %}
    {% endfor %}
    {% for i in arr %}
      {% unless forloop.index0 > depth %}
      </ul></li>
    {% endunless %}
  {% endfor %}
  </nav>
</div>
<div class="widget">
  <h2>Pages</h2>
  <nav class="menu">{% assign depth = 0 %}{% assign arr = "/" | split: "" %}{% assign currentMenu = "/" %}{% for item in site.html_pages %}{% unless item.url contains currentMenu %}{% assign depth = depth | minus: 1 %}{% assign currentMenu = arr[depth] %}</ul></li>{% endunless %}{% if item.next and item.next.url contains item.url %}{% assign depth = depth | plus: 1 %}{% assign arr[depth] = item.url %}{% assign currentMenu = item.url %}<li class="menu-item{% if page.url == item.url %} current-menu-item{% elsif page.url contains item.url and item.url != "/" %} current-menu{% endif %}"><a href="{{ item.url | absolute_url }}">{{ item.title | default: item.url }}</a><ul class="menu">{% elsif item.url contains currentMenu %}<li class="menu-item{% if page.url == item.url %} current-menu-item{% elsif page.url contains item.url and item.url != "/" %} current-menu{% endif %}"><a href="{{ item.url | absolute_url }}">{{ item.title | default: item.url }}</a></li>{% else %}<li class="menu-item{% if page.url == item.url %} current-menu-item{% elsif page.url contains item.url and item.url != "/" %} current-menu{% endif %}"><a href="{{ item.url | absolute_url }}">{{ item.title | default: item.url }}</a></li>{% endif %}{% endfor %}{% for i in arr %}{% unless forloop.index0 > depth %}</ul></li>{% endunless %}{% endfor %}</nav>
</div>
<div class="widget">
<h2>Posts</h2>
  <nav class="menu">{% assign depth = 0 %}{% assign arr = "/" | split: "" %}{% assign currentMenu = "/" %}{% for item in site.posts %}{% unless item.url contains currentMenu %}{% assign depth = depth | minus: 1 %}{% assign currentMenu = arr[depth] %}</ul></li>{% endunless %}{% if item.next and item.next.url contains item.url %}{% assign depth = depth | plus: 1 %}{% assign arr[depth] = item.url %}{% assign currentMenu = item.url %}<li class="menu-item{% if page.url == item.url %} current-menu-item{% elsif page.url contains item.url and item.url != "/" %} current-menu{% endif %}"><a href="{{ item.url | absolute_url }}">{{ item.title | default: item.url }}</a><ul class="menu">{% elsif item.url contains currentMenu %}<li class="menu-item{% if page.url == item.url %} current-menu-item{% elsif page.url contains item.url and item.url != "/" %} current-menu{% endif %}"><a href="{{ item.url | absolute_url }}">{{ item.title | default: item.url }}</a></li>{% else %}<li class="menu-item{% if page.url == item.url %} current-menu-item{% elsif page.url contains item.url and item.url != "/" %} current-menu{% endif %}"><a href="{{ item.url | absolute_url }}">{{ item.title | default: item.url }}</a></li>{% endif %}{% endfor %}{% for i in arr %}{% unless forloop.index0 > depth %}</ul></li>{% endunless %}{% endfor %}</nav>
</div>
<hr />
<div class="widget">
  <h2>Feed</h2>
  <ul class="menu">
    <li class="menu-item"><a href="{{ "/feed.rss" | absolute_url }}">RSS-Feed</a></li>
    <li class="menu-item"><a href="{{ "/feed.atom" | absolute_url }}">Atom-Feed</a></li>
  </ul>
  <p>&copy; 2017 <a href="https://github.com/MPDieckmann">MPDieckmann</a></p>
</div>
