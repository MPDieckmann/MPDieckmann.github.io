---
title: "SpinTheBottle"
themecolor: "#681D1D"
showMeta: false
---
<style type="text/css">.bottle,dialog.dialog-view{width:100%;max-width:400px}.button-group,.list-view>li,.tab-view>header{display:-webkit-flex;display:flex;-webkit-flex-flow:row nowrap;-moz-flex-flow:row nowrap;-ms-flex-flow:row nowrap;-o-flex-flow:row nowrap;flex-flow:row nowrap}.button-group,.tab-view>header{overflow:auto}.tab-view>header button{white-space:nowrap}.tab-view>section{display:none}.tab-view>section.active{display:block}.list-view{padding:0;margin:0;list-style:none}.list-view>li{overflow:hidden}.button-group button{margin:.125em;white-space:nowrap}.dialog-overlay{position:fixed;z-index:9998;top:0;left:0;right:0;bottom:0;display:block;background:rgba(0,0,0,.25);overflow:auto}dialog.dialog-view{display:block;position:static;margin:1em auto;border:1px solid {{ themecolor }};background:{{ cardbackground }};font:inherit;z-index:9999;min-width:200px;padding:0;-webkit-box-shadow:0 0 1em 0 {{ themecolor }};box-shadow:0 0 1em 0 {{ themecolor }}}dialog.dialog-view div{padding:.5em .5em 0}dialog.dialog-view header{border-bottom:inherit;padding:.5em;margin:0}dialog.dialog-view footer{border-top:inherit;padding:.375em;margin-top:.5em}dialog.dialog-view footer button{border-top:inherit}dialog.dialog-view textarea{display:block;width:100%;height:100px;resize:vertical;padding:.25em;margin:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}body .hidden{display:none}.bottle{display:block;overflow:hidden}.bottle img{display:block;-webkit-transform:scale(.9) rotate(0);-ms-transform:scale(.9) rotate(0);-o-transform:scale(.9) rotate(0);transform:scale(.9) rotate(0)}</style>
<script type="text/javascript">var UI=function(){"use strict";function t(){}return new t}();UI.List=function(){"use strict";function t(){var t,e=this;arguments.length>0&&(t=document.getElementById(arguments[0])),t||(t=document.createElement("ul")),this.host=t,t.UITarget=this,t.classList.add("list-view"),t.addEventListener("click",function(t){t.target.classList.contains("remove")&&e.items.indexOf(t.target.parentElement)>=0&&(e.host.removeChild(t.target.parentElement),"function"==typeof e.onremove&&e.onremove({id:t.target.parentElement.getAttribute("data-id")}),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())}),t.addEventListener("change",function(t){t.target.classList.contains("value")&&e.items.indexOf(t.target.parentElement)>=0&&"function"==typeof e.onchange&&e.onchange({id:t.target.parentElement.getAttribute("data-id"),value:t.target.value})})}return Object.defineProperties(t.prototype,{items:{get:function(){var t,e=this.host&&this.host.children,a=[],i=0,n=e.length;for(i;t=e[i],i<n;i++)"li"==t.tagName.toLowerCase()&&a.push(t);return a},enumerable:!0,configurable:!1},values:{get:function(){var t,e,a=this.items,i=[],n=0,r=a.length;for(n;t=a[n],n<r;n++){var e=t.getElementsByTagName("input")[0].value;e&&(t.getAttribute("data-id")?i.push({id:t.getAttribute("data-id"),value:e}):i.push(e))}return i},set:function(t){var e,a=this.items,i=0,n=a.length;for(i;e=a[i],i<n;i++)this.host.removeChild(e);for(i=0,n=t.length,i;e=t[i],i<n;i++)e&&("string"==typeof e?this.add(e):this.add(e.id,e.value))},enumerable:!0,configurable:!1},add:{value:function(t){var e;arguments.length>1&&(e=t,t=arguments[1]);var a=document.createElement("li"),i=document.createElement("input"),n=document.createElement("button");return e&&a.setAttribute("data-id",e),i.type="text",i.placeholder=I18n("Insert text here"),t&&(i.value=t),i.classList.add("value"),a.appendChild(i),n.innerHTML=I18n("-"),n.classList.add("remove"),a.appendChild(n),"function"==typeof this.onadd&&this.onadd({id:e,value:t}),this.host.appendChild(a),i.focus(),e?{id:e,value:t}:t},writable:!1,enumerable:!0,configurable:!1}}),t}(),UI.Tab=function(){"use strict";function t(){var t,e=this;arguments.length>0&&(t=document.getElementById(arguments[0])),t||(t=document.createElement("div")),this.host=t,t.UITarget=this,t.classList.add("tab-view"),t.addEventListener("click",function(t){e.headers.indexOf(t.target)>=0&&(e.active={id:t.target.getAttribute("data-for")},t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())}),null==this.header&&(null==t.firstChild?t.appendChild(document.createElement("header")):t.insertBefore(document.createElement("header"),t.firstChild)),this.active=this.active}return Object.defineProperties(t.prototype,{header:{get:function(){var t,e=this.host&&this.host.children,a=0,i=e.length;for(a;t=e[a],a<i;a++)if("header"==t.tagName.toLowerCase())return t;return null},enumerable:!0,configurable:!1},headers:{get:function(){var t,e=this.header&&this.header.children,a=[],i=0,n=e.length;for(i;t=e[i],i<n;i++)"button"==t.tagName.toLowerCase()&&a.push(t);return a},enumerable:!0,configurable:!1},sections:{get:function(){var t,e=this.host&&this.host.children,a=[],i=0,n=e.length;for(i;t=e[i],i<n;i++)"section"==t.tagName.toLowerCase()&&a.push(t);return a},enumerable:!0,configurable:!1},add:{value:function(t,e){var a=this.get(t);if(null!=a.header||null!=a.section)throw"Already exists: "+t;var i=document.createElement("button");i.setAttribute("data-for",t),i.innerHTML=e,this.header.appendChild(i);var n=document.createElement("section");return n.setAttribute("data-id",t),this.host.appendChild(n),this.active=this.active,{id:t,title:e,header:i,section:n}},writable:!1,enumerable:!0,configurable:!1},get:{value:function(t){var e,a,i=this.headers,n=this.sections,r={id:t,title:null,header:null,section:null},o=0,l=i.length;for(o;e=i[o],o<l;o++)if(e.getAttribute("data-for")==t){r.header=e,r.title=e.innerHTML;break}for(o=0,l=n.length,o;a=n[o],o<l;o++)if(a.getAttribute("data-id")==t){r.section=a;break}return r},writable:!1,enumerable:!0,configurable:!1},remove:{value:function(t){var e=this.get(t);if(null==e.header||null==e.section)throw"Does not exist: "+t;return this.header.removeChild(e.header),this.host.removeChild(e.section),this.active=this.active,e},writable:!1,enumerable:!0,configurable:!1},active:{get:function(){var t,e=this.headers,a=0,i=e.length;for(a;t=e[a],a<i;a++)if(t.classList.contains("active"))return this.get(t.getAttribute("data-for"));if(e.length>0){t=e[0];var n=this.get(t.getAttribute("data-for"));return n.header.classList.add("active"),n.section.classList.add("active"),n}return{id:null,title:null,header:null,section:null}},set:function(t){var e=this.get(t&&t.id);if(null==e.id)return e;if(null==e.header||null==e.section)throw"Not found: "+e.id;var a=this.active;return a.id==e.id?e:(a.header.classList.remove("active"),a.section.classList.remove("active"),e.header.classList.add("active"),e.section.classList.add("active"),e)},enumerable:!0,configurable:!1}}),t}(),UI.Dialog=function(){"use strict";function t(t){var a=document.createElement("div");this.host=a,a.UITarget=this,a.classList.add("dialog-overlay"),t=Object(t),this.promise=new Promise(function(i,n){document.body.appendChild(a);var r=e(t,i,n);a.appendChild(r),a.addEventListener("click",function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),i({button:!1}),document.body.removeChild(a)})})}function e(t,e,i){var n=document.createElement("dialog");n.classList.add("dialog-view");var r=document.createElement("header");if(r.innerHTML=t.title||"",r.classList.add("headline"),n.appendChild(r),t.text){var o=document.createElement("div");o.innerHTML=t.text,n.appendChild(o)}if(t.editable||t.value){var l=document.createElement("div"),d=document.createElement("textarea");d.placeholder=t.placeholder||"",d.value=t.value||"",d.readOnly=t.editable!==!0,l.appendChild(d),n.appendChild(l)}var s=document.createElement("footer");s.classList.add("button-group"),(!t.buttons||t.buttons.length<=0)&&(t.buttons=[I18n("Ok")]);var u=0,c=t.buttons.length;for(c=c||0;u<c;u++)s.appendChild(a(t.buttons[u]));return n.appendChild(s),n.addEventListener("click",function(a){if(a.stopPropagation(),a.stopImmediatePropagation(),"button"==a.target.tagName.toLowerCase()){a.preventDefault();var i=a.target.UIOptions;e(t.editable?{button:i,value:t.editable.value}:{button:i}),document.body.removeChild(n.parentElement)}}),n}function a(t){t=String(t);var e=document.createElement("button");return e.innerHTML=t,e.UIOptions=t,e}return Object.defineProperties(t.prototype,{then:{value:function(t){var e;if(arguments.length>1&&(e=arguments[1]),"function"==typeof t&&"function"==typeof e)return this.promise.then(t,e);if("function"!=typeof t||e)throw new TypeError("arguments must be of type function");return this.promise.then(t)},writable:!1,enumerable:!0,configurable:!1},catch:{value:function(t){if("function"==typeof t)return this.promise.catch(onresolve);throw new TypeError("argument must be of type function")},writable:!1,enumerable:!0,configurable:!1}}),t}();var Game=function(){"use strict";function t(){var t;arguments.length>0&&(t=document.getElementById(arguments[0])),t||(t=document.createElement("div")),this.host=t,t.classList.add("app-view");var a,i=0,n=e.length;for(i;a=e[i],i<n;i++)a.apply(this,arguments)}var e=[];return t.register=function(t){return"function"==typeof t&&(e.push(t),!0)},t}();(function(){"use strict";function t(t,e,a,i){var n=t.add(e,a),r=new UI.List;i&&(r.values=i),n.section.appendChild(r.host);var o=document.createElement("div");o.classList.add("button-group");var l=document.createElement("button");l.innerHTML=I18n("+ add"),l.addEventListener("click",function(t){r.add(),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),o.appendChild(l);var d=document.createElement("button");d.innerHTML=I18n("&gt; Export"),d.addEventListener("click",function(t){new UI.Dialog({title:I18n("Export data"),text:I18n("Copy data from the text area below"),value:JSON.stringify(r.values),buttons:["Close"]}),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),o.appendChild(d);var s=document.createElement("button");s.innerHTML=I18n("&lt; Import"),s.addEventListener("click",function(t){new UI.Dialog({title:I18n("Import data"),text:I18n("Paste data into the text area below"),editable:!0,placeholder:"[]",buttons:[I18n("Import data"),I18n("Abort")]}).then(function(t){if(t.value&&t.button==I18n("Import data")){var e=JSON.parse(t.value);return new UI.Dialog({title:I18n("Import data"),text:I18n("Do you wish to clear the list before importing data?"),buttons:[I18n("Yes"),I18n("No")]}).then(function(t){t.button==I18n("Yes")?r.values=e:r.values=r.values.concat(e)})}}),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),o.appendChild(s),n.section.appendChild(o)}Game.prototype.setup=function(){for(var e=this,a=!0;this.host.firstChild;)this.host.removeChild(this.host.firstChild);var i=document.createElement("h2");i.innerHTML=I18n("Setup"),this.host.appendChild(i);var n=new UI.Tab,r=n.add("settings",I18n("Settings")),o=new UI.List;o.onadd=function(e){a||t(n,e.id,e.value)},o.onchange=function(t){n.get(t.id).header.innerHTML=t.value},o.onremove=function(t){n.remove(t.id)},r.section.appendChild(o.host);var l=document.createElement("div");l.classList.add("button-group");var d=document.createElement("button");d.addEventListener("click",function(t){o.add("tab"+Date.now(),I18n("New Category")),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),d.innerHTML=I18n("+ add"),l.appendChild(d);var s=document.createElement("button");s.addEventListener("click",function(t){var a=[],i=!1;o.values.forEach(function(t){var e=n.get(t.id),r=e.section.getElementsByTagName("ul")[0].UITarget,o=r.values;o.length>0&&(a.push({id:t.id,name:t.value,values:o}),i=!0)});var r=n.get("players").section.getElementsByTagName("ul")[0].UITarget.values;localStorage.setItem("spinTheBottlePlayers",JSON.stringify(r)),localStorage.setItem("spinTheBottleData",JSON.stringify(a)),e.start(r,a),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),s.innerHTML=I18n("Save and start"),l.appendChild(s);var u=document.createElement("button");u.addEventListener("click",function(t){new UI.Dialog({title:I18n("Import data"),text:I18n("Paste data into the text area below"),editable:!0,placeholder:'{"players":[],"data":[]}',buttons:[I18n("Import data and reload page"),I18n("Abort")]}).then(function(t){if(t.value&&t.button==I18n("Import data and reload page")){var e=JSON.parse(t.value);localStorage.setItem("spinTheBottlePlayers",JSON.stringify(e.players)),localStorage.setItem("spinTheBottleData",JSON.stringify(e.data)),location.reload()}}),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),u.innerHTML=I18n("&lt; Import"),l.appendChild(u);var c=document.createElement("button");c.addEventListener("click",function(t){var e=[],a=!1;o.values.forEach(function(t){var i=n.get(t.id),r=i.section.getElementsByTagName("ul")[0].UITarget,o=r.values;o.length>0&&(e.push({id:t.id,name:t.value,values:o}),a=!0)});var i=n.get("players").section.getElementsByTagName("ul")[0].UITarget.values;localStorage.setItem("spinTheBottlePlayers",JSON.stringify(i)),localStorage.setItem("spinTheBottleData",JSON.stringify(e)),new UI.Dialog({title:I18n("Export data"),text:I18n("Copy data from the text area below"),value:JSON.stringify({players:i,data:e}),buttons:[I18n("Close")]}),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),c.innerHTML=I18n("&gt; Export"),l.appendChild(c),r.section.appendChild(l),this.host.appendChild(n.host);var I=JSON.parse(localStorage.getItem("spinTheBottlePlayers")||"[]"),M=JSON.parse(localStorage.getItem("spinTheBottleData")||"[]");t(n,"players",I18n("Players"),I),M.forEach(function(e){o.add(e.id,e.name),t(n,e.id,e.name,e.values)}),a=!1}})(),function(){"use strict";function t(t){return Math.floor(Math.round(Math.random()*(t-1)))}Game.prototype.start=function(e,a){for(var i=this,n=null,r=null;this.host.firstChild;)this.host.removeChild(this.host.firstChild);var o=new UI.Tab;o.header.classList.add("hidden"),this.host.appendChild(o.host);var l=o.add("bottle",I18n("Bottle")),d=o.add("categories",I18n("Categories")),s=o.add("task",I18n("Task")),u=JSON.stringify(a);this.players=e.map(function(t){return{name:t,data:JSON.parse(u)}}),0==this.players.length&&(this.players=null);var c=document.createElement("h2");c.innerHTML=I18n("Player"),l.section.appendChild(c);var I=document.createElement("div");I.classList.add("bottle");var M=document.createElement("img");M.src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjY0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgaGVpZ2h0PSI2NDAiPgogPGRlZnM+CiAgPGZpbHRlciBpZD0iZmlsdGVyNDYzNyIgc3R5bGU9ImNvbG9yLWludGVycG9sYXRpb24tZmlsdGVyczpzUkdCIiBoZWlnaHQ9IjEuMTUxNiIgd2lkdGg9IjIuMzA3OSIgeT0iLS4wNzU4IiB4PSItLjY1Mzk1Ij4KICAgPGZlR2F1c3NpYW5CbHVyIGlkPSJmZUdhdXNzaWFuQmx1cjQ2MzkiIHN0ZERldmlhdGlvbj0iMy4yMTk3OSIvPgogIDwvZmlsdGVyPgogIDxmaWx0ZXIgaWQ9ImZpbHRlcjc1ODAiIHN0eWxlPSJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM6c1JHQiIgaGVpZ2h0PSIxLjcyIiB3aWR0aD0iMS43MiIgeT0iLS4zNiIgeD0iLS4zNiI+CiAgIDxmZUdhdXNzaWFuQmx1ciBpZD0iZmVHYXVzc2lhbkJsdXI3NTgyIiBzdGREZXZpYXRpb249IjQuNjk3MjEiLz4KICA8L2ZpbHRlcj4KICA8ZmlsdGVyIGlkPSJmaWx0ZXIzOTQ3IiBzdHlsZT0iY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzOnNSR0IiPgogICA8ZmVHYXVzc2lhbkJsdXIgaWQ9ImZlR2F1c3NpYW5CbHVyMzk0OSIgc3RkRGV2aWF0aW9uPSIyLjc1MTE4Ii8+CiAgPC9maWx0ZXI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXJHcmFkaWVudDcwMjciIHkyPSIuNTAwMDEiIHkxPSIuNTAwMDEiIHgxPSItLjA5Mzg4Ij4KICAgPHN0b3AgaWQ9InN0b3A3NjA4IiBzdG9wLWNvbG9yPSIjNTAxNjE2IiBvZmZzZXQ9IjAiLz4KICAgPHN0b3AgaWQ9InN0b3A3NjE2IiBzdG9wLWNvbG9yPSIjYTAyYzJjIiBvZmZzZXQ9Ii4zNzEwNCIvPgogICA8c3RvcCBpZD0ic3RvcDc2MTQiIHN0b3AtY29sb3I9IiM4MDAwMDAiIG9mZnNldD0iLjUzNjI0Ii8+CiAgIDxzdG9wIGlkPSJzdG9wNzYxMCIgc3RvcC1jb2xvcj0iIzJiMDAwMCIgb2Zmc2V0PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhckdyYWRpZW50NzAyOSIgeTI9Ii41MDAwMSIgeDI9IjEuMTIyNSIgeTE9Ii41MDAwMSIgeDE9Ii0uMTY0NDYiPgogICA8c3RvcCBpZD0ic3RvcDQ1OTYiIHN0b3AtY29sb3I9IiMzNjJlMGYiIHN0b3Atb3BhY2l0eT0iLjg0NCIgb2Zmc2V0PSIwIi8+CiAgIDxzdG9wIGlkPSJzdG9wNDYxNCIgc3RvcC1jb2xvcj0iI2RmZGZiMyIgb2Zmc2V0PSIuMTk5MDYiLz4KICAgPHN0b3AgaWQ9InN0b3A0NjEyIiBzdG9wLWNvbG9yPSIjZWJlNmI2IiBvZmZzZXQ9Ii40MjU0Ii8+CiAgIDxzdG9wIGlkPSJzdG9wNDYwMiIgc3RvcC1jb2xvcj0iI2U3ZGNhZiIgb2Zmc2V0PSIuNjcyNDEiLz4KICAgPHN0b3AgaWQ9InN0b3A0NTk4IiBzdG9wLWNvbG9yPSIjZGVkMmE2IiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiA8L2RlZnM+CiA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDExMS44NzUpIj4KICA8cGF0aCBpZD0icGF0aDUyMzAiIHRyYW5zZm9ybT0icm90YXRlKC05MCA3OS40NDEgMjA3LjkxKSIgZmlsbD0idXJsKCNsaW5lYXJHcmFkaWVudDcwMjcpIiBkPSJtNTEuMTExIDI2My44YzE2LjA4NC0yLjI4MyAzNS42MDEtMy42NzEgNTYuNzk4IDAuMDY3MDE3LTAuNjUwOTktMjQuNTkxLTEuOTE5LTUwLjU2NS0yLjQzNi03Ni4zMzQgMC4xNDktMi42MzQgMS44My0zLjIwMSAyLjIxNC00Ljk1IDAuMTE5LTUuMTU5LTAuMDU2LTkuMDEtMC4xODktMTMuNzAxLTAuMDM1MDA0LTEuMjk1LTIuMTQ4LTIuMDk0LTIuMDg1LTMuMDUyIDAuMTc4LTMuNjEzLTAuMTM3LTcuODg3LTAuMTM3LTcuODg3LTAuMzU1LTAuNzA5OTktMC40ODktMC45MTItMC43NTYtMS41OTctMC4yMjMtMC41NzEtMC4xOTI5OS0xLjcwMS0xLjExNC0yLjExOC0xMS4zNi0zLjM2NS0yOS41OTEtMi4zNTUtNDQuNzg4LTAuOTkxLTMuMzU2NCAwLjg4OC00LjkxMzUgMi44ODMtNS4xNTI5IDUuNjlsMC4wODQxIDYuNjUzLTIuMTQ4MyAyLjMzOC0wLjEzNTMgMTQuODQ1YzAuNzkyMSAxLjQxMSAxLjgwOTIgMi4zNyAxLjkyNzUgNS4xMjhsLTIuMjE4MiA3NS44MiAwLjA4OTcgMC4wODloMC4wODk3OTgtMC4wNDQwOTh6Ii8+CiAgPGcgc3Ryb2tlLXdpZHRoPSIuMTk3Ij4KICAgIDxwYXRoIGlkPSJyZWN0NjAwNCIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDM2OS4zOCAyMDguNTEpIiBmaWxsPSIjMmIwMDAwIiBkPSJtMzM0LjQ3IDE1Ljk0M2MzLjEtMy40OTE3IDUuNDA4LTguNzg5OCA2LjA1LTE0LjU4NCAxLjQ0Ni0xMy4wNDIgMS4wODItMjYuOTQ0IDEuMDgyLTI2Ljk0NCAxNC45MTYtMy4yNjYyIDM3Ljc1NC0zLjA2MTMgNTYuODI4IDAuMTgxMS0wLjE2OCA0OS42NDcgOS40NDUgMzguNjk0IDI1LjI0MyA2MC42ODYgMTAuNjgxIDE0LjM1NiAxOC4xMDMgMzIuMTMzIDE4LjM2MyA1MC4yMzkgMC4wMTg5ODIgMTA2LjQtMC40NzEwMSAyMTAuNC0wLjQ1MiAzMTguOTUtMC41NDEwMiA4LjgxMy0wLjI3NDAyIDE4Ljg1Ni0zLjEwMyAyNi4wNS0wLjUzNjAxIDEuMzYzLTAuODQ2MDEgMi43NjYtMS4zNDIgNC4wNTctMy42MTMgOS40Mi0yOS43NzggMTAuMjM5LTQ2Ljg0IDEwLjM4N2wtNDQuOTY0LTAuMTQ3cy0zNC4wMDgtMC4xNjkwMS00MS42MjItNi4wNDJjLTEuOTM4LTEuNDk2LTQuNTE3LTkuNjM2LTUuMzczLTEzLjIzNS0wLjI2Ny0xLjEyNC0wLjk1Mi0wLjg0NjAxLTAuOTUyLTAuODQ2MDFsMC4wMDQtMi42NzFjLTEuNzA3LTExMy42IDAuMzg0LTIyNS4zOSAwLjU3NTAxLTMzOC4wOSAzLjgxMy00My4xMTQgMzAuNDI4LTYwLjY4MSAzNi41MDMtNjcuOTkyeiIvPgogICAgPGcgZmlsbD0iI2ZmZiI+CiAgICA8cGF0aCBpZD0icGF0aDc1ODQiIG9wYWNpdHk9Ii41IiBkPSJtMTc2LjMgMjE5LjUzYzAgNS4xNTY4LTQuMTgwNCA5LjMzNzMtOS4zMzczIDkuMzM3My01LjE1NjggMC05LjMzNzItNC4xODA0LTkuMzM3Mi05LjMzNzNzNC4xODA0LTkuMzM3MyA5LjMzNzItOS4zMzczYzUuMTU2OSAwIDkuMzM3MyA0LjE4MDQgOS4zMzczIDkuMzM3M3oiIHRyYW5zZm9ybT0icm90YXRlKC05MCAxNjYuOTYgMjE5LjUzKSIgZmlsdGVyPSJ1cmwoI2ZpbHRlcjc1ODApIi8+CiAgICA8cGF0aCBpZD0icGF0aDc1NzAiIG9wYWNpdHk9Ii41IiBkPSJtMjQyLjYzIDI0MS44NmMwIDEyLjMxOS05Ljk4NjYgMjIuMzA2LTIyLjMwNiAyMi4zMDZzLTIyLjMwNi05Ljk4NjYtMjIuMzA2LTIyLjMwNiA5Ljk4NjYtMjIuMzA2IDIyLjMwNi0yMi4zMDYgMjIuMzA2IDkuOTg2NiAyMi4zMDYgMjIuMzA2eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDIyMC4zMiAyNDEuODYpIiBmaWx0ZXI9InVybCgjZmlsdGVyNzU4MCkiLz4KICAgIDwvZz4KICA8L2c+CiAgPHBhdGggaWQ9InJlY3Q2MDEyIiBvcGFjaXR5PSIuNiIgZD0ibTkwLjMzNyAxNDYuMTljNC45ODUxLTAuNzQxOTkgOS45NzAxLTAuNzg0IDE0Ljk1NSAwbDAuNzExIDEzNy41NmMtNC43NTEgNC4xNDYtMTAuMTMzIDUuOTEtMTUuNjY2IDcuMTAzdi0xNDQuNjd6IiBmaWxsLW9wYWNpdHk9Ii45MDMiIHRyYW5zZm9ybT0icm90YXRlKC05MCA5OC4xNjkgMjE4LjI0KSIgZmlsdGVyPSJ1cmwoI2ZpbHRlcjQ2MzcpIiBzdHJva2Utd2lkdGg9Ii4zNDgiIGZpbGw9IiNmZmUxY2MiLz4KICA8ZyBzdHJva2Utd2lkdGg9Ii4xOTciPgogICAgPHBhdGggaWQ9InBhdGg3NTYwIiBkPSJtMzQ1LjkxIDQ5LjY0NWMxNS4xNzMgMi41MDczIDIwLjczOCA3LjgwNzggMjkuMTk4IDE1LjExdjM2Mi4wNWw1MC43NDEgMC43Mi0yOC40OTItMzk5LjExLTEyLjIzMi0xNi4xODljLTUuODI0IDMuNzQ4MS0xMy40NCA1LjcwNTUtMjAuODg4IDUuODk2NC04LjM3NSAwLjIxMzctMzYuMDA2IDMxLjE3OC00NS42NyA2Mi4xIDUuMDE3IDI1LjI1OSAxNS40NDgtMjMuNDE4IDI3LjM0My0zMC41OHYwLjAwMDA5OXoiIHRyYW5zZm9ybT0icm90YXRlKC05MCAzNzIuMjEgMjE5Ljg4KSIgZmlsdGVyPSJ1cmwoI2ZpbHRlcjM5NDcpIiBmaWxsPSIjMmIwMDAwIi8+CiAgICA8cGF0aCBpZD0icGF0aDYwMDciIHRyYW5zZm9ybT0icm90YXRlKC05MCAzNzMuMDYgMjA4LjUyKSIgZmlsbD0idXJsKCNsaW5lYXJHcmFkaWVudDcwMjkpIiBkPSJtNDQ1LjczIDEyMS43M2MwLjAxODc5OSAxMDYuNC0wLjI5MTI2IDY1LjY0MS0wLjI3MjUyIDE3NC4xOS03LjM2NTcgMS4xODMyLTEwNS4zMiA1LjEyMjktMTQ0Ljg5LTIuMzAxOS0wLjMwODA0LTQ0LjMwNC0wLjMwMjQ5LTEwNy4xNSAwLjk1NDcxLTE3My41IDI5LjQ1My0xLjc4NzcgOTEuMTg3LTEuNTUyMyAxNDQuMiAxLjYwOHoiLz4KICA8L2c+CiAgPGcgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIj4KICAgIDxwYXRoIGlkPSJwYXRoNzUwMyIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDI5Mi41MiAyMDguNDUpIiBkPSJtMjIxLjA0IDIwOC45M2M0Ni42MzMtMS4zNjU4IDk0Ljc5Ny0yLjY4NDEgMTQyLjk3IDAuNTA4NzkiLz4KICAgIDxwYXRoIGlkPSJwYXRoNzUwNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDQ1MS41NyAyMDguNzEpIiBkPSJtMzc5LjMyIDIwNi44NWM0Ni43NDQgNC4wNDU4IDk1LjA0IDQuNjAwOCAxNDQuNSAyLjU0NCIvPgogIDwvZz4KICA8ZyBzdHJva2Utd2lkdGg9IjMiIGZpbGw9IiM1MDAiPgogICAgPHBhdGggaWQ9InJlY3QzOTUxIiBvcGFjaXR5PSIuNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDM1LjIyOCAyMDcuOTEpIiBkPSJtOS40Mzg3IDIwNi45MWMxNi45NjYtMC45MDcwNiAzNC4xMzMtMS4wMTA2IDUxLjU3OSAwdjIuNzM0OGMtMTcuNDIzLTEuMTQ5NS0zNC42MzYtMS4yNDgxLTUxLjU3OSAwdi0yLjczNDh6Ii8+CiAgICA8cGF0aCBpZD0icGF0aDM5NTQiIG9wYWNpdHk9Ii40IiB0cmFuc2Zvcm09InJvdGF0ZSgtOTAgNTUuNTQ2IDIwNy44OCkiIGQ9Im0yNy4zNCAyMDYuNjJjMTguOS0yLjQxMjEgNDEuNzg4LTEuNDQ4OCA1Ni40MTIgMC0wLjEyOTAzIDAuNjI1MjMtMi4wNjMxIDIuNjcyMi0yLjEwMDIgMy45OTQtMTYuNjc4LTIuMTg2NS0zNC45MDktMi40OTE3LTUyLjQzNyAwLTAuMDM5NDYxLTEuODUxNy0xLjE0MDItMi43NjAxLTEuODc0Ny0zLjk5NHoiLz4KICA8L2c+CiA8L2c+Cjwvc3ZnPgo=",M.rotate=0,I.appendChild(M),l.section.appendChild(I);var g=document.createElement("button");g.classList.add("hidden"),g.innerHTML=I18n("Next"),g.addEventListener("click",function(t){var a={name:"Player",data:JSON.parse(u)};if(i.players){var n=e[Math.floor(M.rotate/360*e.length)],l=0,s=i.players.length;for(l;(a=i.players[l],l<s)&&a.name!=n;l++);r=a}o.active=d;for(var c,I,g,N=a.data;m.firstChild;)m.removeChild(m.firstChild);p.innerHTML=a.name;var l=0,s=N.length;for(l;c=N[l],l<s;l++)I=document.createElement("li"),g=document.createElement("button"),g.innerHTML=c.name,g.category=c,g.player=a,I.appendChild(g),m.appendChild(I);t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),l.section.appendChild(g);var p=document.createElement("h2");p.innerHTML=I18n("Player"),d.section.appendChild(p);var m=document.createElement("ul");m.classList.add("list-view"),m.addEventListener("click",function(e){var a,r=e.target.category,l=e.target.player,d=t(r.values.length);r[d]==n&&r.length>1&&d--,a=r.values.splice(d,1)[0],n=a,0==r.values.length&&(l.data.splice(l.data.indexOf(r),1),i.players&&0==l.data.length&&(i.players.splice(i.players.indexOf(l),1),0==i.players.length&&D.classList.add("hidden"))),o.active=s,D.focus(),h.innerHTML=l.name,L.innerHTML=a,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}),d.section.appendChild(m);var N=document.createElement("button");N.innerHTML=I18n("SpinTheBottle"),N.addEventListener("click",function(t){D.click(),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),d.section.appendChild(N);var h=document.createElement("h2");h.innerHTML=I18n("Player"),s.section.appendChild(h);var L=document.createElement("p");s.section.appendChild(L);var v=document.createElement("div");v.classList.add("button-group");var D=document.createElement("button");D.innerHTML=I18n("SpinTheBottle"),D.addEventListener("click",function(a){o.active=l,g.classList.add("hidden");var n=i.players,d=e,s=I18n("Player");null==n&&(n=[{name:s}],d=[s]),new Promise(function(e){var a=t(n.length);n[a]==r&&(a++,a>=n.length&&(a=0));var i,o=d.indexOf(n[a].name),l=360*o/n.length+t(360/n.length),s=t(2)+2,u=2*s;i=1==t(2)?setInterval(function(){M.rotate+=u,M.rotate>=360&&(M.rotate-=360,s--,u/=2),M.style.webkitTransform="scale(0.9) rotate("+M.rotate+"deg)",M.style.msTransform="scale(0.9) rotate("+M.rotate+"deg)",M.style.oTransform="scale(0.9) rotate("+M.rotate+"deg)",M.style.transform="scale(0.9) rotate("+M.rotate+"deg)",c.innerHTML=d[Math.floor(M.rotate/360*d.length)],s<=0&&M.rotate>=l&&(clearInterval(i),e())},0):setInterval(function(){M.rotate-=u,M.rotate<=0&&(M.rotate+=360,s--,u/=2),M.style.webkitTransform="scale(0.9) rotate("+M.rotate+"deg)",M.style.msTransform="scale(0.9) rotate("+M.rotate+"deg)",M.style.oTransform="scale(0.9) rotate("+M.rotate+"deg)",M.style.transform="scale(0.9) rotate("+M.rotate+"deg)",c.innerHTML=d[Math.floor(M.rotate/360*d.length)],s<=0&&M.rotate<=l&&(clearInterval(i),e())},0)}).then(function(){g.classList.remove("hidden"),g.focus()}),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation()}),v.appendChild(D);var T=document.createElement("button");T.innerHTML=I18n("Quit"),T.addEventListener("click",function(t){i.setup(),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),v.appendChild(T),s.section.appendChild(v),D.click()}}();</script>
<app-view class="app-view" id="app-view-0"></app-view>
<script type="text/javascript">new Game("app-view-0").setup();</script>
